{% extends "announcements/base.html" %}

{% block heading_inner %}Announcements
{% if request.user.is_authenticated and request.user.is_staff %}
  <a class="btn btn-primary" href="{% url 'announcements:create' %}" role="button">New</a>
{% endif %}
{% endblock %}
{% block content %}
<div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
{% for object in object_list %}
  <div class="panel accordian
    {% if object.id == active_id %} active {% endif %}
    {% if object.sticky %}panel-info{% else %}panel-default{% endif %}">
    <div class="panel-heading accordian accordian-trigger
      {% if object.id == active_id %} active {% endif %}"
      role="tab" id="heading{{object.id}}"
      aria-expanded="{% if object.id == active_id %}true{% else %}false{% endif %}"
      aria-controls="collapse{{object.id}}"
      data-parent="#accordion" data-toggle="collapse" data-target="#collapse{{object.id}}">
      <h4 class="panel-title">
        <!-- <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse{{object.id}}" aria-expanded="true" aria-controls="collapse{{object.id}}"> -->
          {% if object.sticky %}<i class="fa fa-exclamation-circle">&nbsp;</i>{% endif %}
          {{object.title}}
        <!-- </a> -->
        <small class="pull-right">{{object.datetime_released.date}}</small>
      </h4>
    </div>
    <div id="collapse{{object.id}}"
      class="panel-collapse collapse {% if object.id == active_id %} in {% endif %}"
      role="tabpanel" aria-labelledby="heading{{object.id}}">
      <div class="panel-body">
        <i class="fa fa-quote-left fa-3x pull-left fa-border"></i>
        <div>
          {{object.content|safe}}
        </div>
        {% if request.user.is_authenticated and request.user.is_staff %}
        <div class="pull-right">
          <a class="btn btn-danger" href="{% url 'announcements:delete' object.id %}" role="button">Delete</a>
          <a class="btn btn-warning" href="{% url 'announcements:update' object.id %}" role="button">Edit</a>
          <a class="btn btn-primary" href="{% url 'announcements:copy' object.id %}" role="button">Copy</a>
        </div>
        {% endif %}
      </div>
    </div>
  </div>
{% endfor %}
</div>

<ul class="pagination pagination-centered">
    {% if object_list.has_previous %}
        <li><a href="{% url 'announcements:list' %}?page=1"><<</a></li>
        <li><a href="{% url 'announcements:list' %}?page={{ object_list.previous_page_number }}"><</a></li>
    {% endif %}

    {% for i in object_list.paginator.page_range %}
        <li {% if object_list.number == i %} class="active" {% endif %}><a href="{% url 'announcements:list' %}?page={{i}}">{{i}}</a></li>
    {% endfor %}

    {% if object_list.has_next %}
        <li><a href="{% url 'announcements:list' %}?page={{ object_list.next_page_number }}">></a></li>
        <li><a href="{% url 'announcements:list' %}?page={{ object_list.paginator.num_pages }}">>></a></li>
    {% endif %}
</ul>

{% endblock %}
