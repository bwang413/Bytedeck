{% extends "badges/base.html" %}
{% load crispy_forms_tags %}
{% load staticfiles %}

{% block heading_inner %}{{heading}}
{% if request.user.is_staff %}
  <a class="btn btn-primary" href="{% url 'badges:badge_create' %}" role="button">New</a>
{% endif %}
{% endblock %}

{% block content %}
{% for badge_type in badge_types %}
<div class="panel panel-primary">

  <div class="panel-heading">
    <h3 class="panel-title">
      <i class="pull-right fa {{badge_type.fa_icon}}"></i>
      {{badge_type.name}}s
    </h3>
  </div>
  <div class="panel-body panel-body-badge">
    <div class="row">
      {% for badge in badge_type.badge_set.all %}
          {% if request.user.is_staff or badge.active %}
              <div class="col-xs-4 col-sm-3 col-md-2 col-badge">
                <a tabindex="0" class="badge-popover" role="button" data-toggle="popover"
                    data-trigger="focus" data-placement="auto left" data-html="true"
                    title="{% include 'badges/snippets/badge_popover_title.html' %}"
                    data-content="{% include 'badges/snippets/badge_popover_content.html'%}">
                    <div class="thumbnail thumbnail-badge">
                        {% if not badge.active %}
                            <i class="fa fa-2x fa-eye-slash pull-right text-danger" style="position:absolute;"></i>
                        {% endif %}
                        <img class="hackerbadge img-rounded
                            {% if not badge in earned_badges %} hackerbadge-unearned {% endif %}"
                            src="{{badge.get_icon_url}}" alt="badge icon">
                        <div class="caption caption-badge text-center">
                            {{badge.name}}
                        </div>
                    </div>
                </a>
              </div>
          {% endif %}
      {% empty %}
      <div class='col-sm-12'>None.</div>
      {% endfor %}

    </div>

  </div>

</div> <!--panel -->
{% endfor %}

{% endblock %}
{% block js %}
<script>
$(document).ready(function() {
  $('[data-toggle="popover"]').popover(

  )
});
</script>
{% endblock %}
