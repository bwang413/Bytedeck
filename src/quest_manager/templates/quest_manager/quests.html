{% extends "quest_manager/base.html" %}
{% load crispy_forms_tags %}

{% block heading_inner %} {{ heading }}
  {% if request.user.is_staff %}
    <a class="btn btn-primary" href="{% url 'quests:quest_create' %}" role="button">New</a>
  {% endif %}
{% endblock %}

{% block content %}

<ul id='quest-tabs' class="nav nav-tabs nav-justified" role="tablist">
  <li role="presentation" {% if available_tab_active %}class="active"{% endif%}>
    <a href="#available" role="tab" data-toggle="tab">
      Available
      <span class="badge">{{available_quests|length}}</span>
    </a>

  </li>
  <li role="presentation" {% if inprogress_tab_active %}class="active"{% endif%}>
    <a href="#inprogress" role="tab" data-toggle="tab">
      In Progress
      <span class="badge">{{in_progress_submissions|length}}</span>
    </a>
  </li>
  <li role="presentation" {% if completed_tab_active %}class="active"{% endif%}>
    <a href="#completed" role="tab" data-toggle="tab">
      Completed
      <span class="badge">{{completed_submissions|length}}</span>
    </a>
  </li>
</ul>
<!-- Tab panes -->
<div class="tab-content">
  <div role="tabpanel"
  class="tab-pane fade {% if available_tab_active %}in active{% endif%}" id="available">
    {% include 'quest_manager/tab_quests_available.html' %}
  </div>
  <div role="tabpanel"
  class="tab-pane fade {% if inprogress_tab_active %}in active{% endif%}" id="inprogress">
    {% with submissions=in_progress_submissions %}
      {% include 'quest_manager/tab_quests_submission.html' %}
    {% endwith %}
  </div>
  <div role="tabpanel"
  class="tab-pane fade {% if completed_tab_active %}in active{% endif%}" id="completed">
    {% with submissions=completed_submissions completed=True %}
      {% include 'quest_manager/tab_quests_submission.html' %}
    {% endwith %}
  </div>
</div>
{% endblock %}
