<!--
  Quests
    > AVAILABLE (tab_quests_available.html)
    > in progress (tab_quests_submission.html)
    > completed (tab_quests_submission.html)
    > past courses (tab_quests_submission.html)
-->

{% if available_quests %}

  <div class="row panel-heading">
    <div class="col-xs-1 col-icon"></div>
    <div class="col-xs-6">Quest</div>
    <div class="col-xs-1">XP   </div>
    <div class="col-xs-3">Expiry</div>
    <div class="col-xs-2"></div>
  </div>
  <div class="panel-group panel-group-packed" id="accordion-available"
    role="tablist" aria-multiselectable="true">

  {% for q in available_quests %}

    <div class="panel accordian
      {% if not q.visible_to_students %}panel-danger
      {% elif q.expired %}panel-warning
      {% else %}panel-default
      {% endif %}
      {% if q.id == active_q_id %} active {% endif %}">
      <div class="panel-heading accordian accordian-trigger panel-heading-tall
        {% if q.id == active_q_id %} active {% endif %}"
        role="tab"
        id="heading-quest-{{q.id}}"
        aria-expanded="{% if q.id == active_q_id %}true{% else %}false{% endif %}"
        aria-controls="collapse-quest-{{q.id}}"
        data-parent="#accordion-available" data-toggle="collapse"
        data-target="#collapse-quest-{{q.id}}">

        <div class="row">
          <h4 class="panel-title">
            <div class="col-xs-1 col-icon">
              <img class="img-responsive panel-title-img img-rounded"
                src="{{ q.get_icon_url }}" alt="icon"/>
            </div>
            <div class="col-xs-6">{{q.name}}</div>
            <div class="col-xs-1">{{q.xp}}  </div>
            {% comment %}
              <div class="col-xs-2"><small>
               {% for c in q.categories.all %}{{c}} {% empty %}-{% endfor %}
              </small></div>
            {% endcomment %}
            <div class="col-xs-3"><small>
              {% if q.date_expired %}{{q.date_expired}}
              {% else %}{{q.time_expired}}
              {% endif %}
            </small></div>
            <div id="status-icon-{{q.id}}" class="col-xs-1"></div>

          </h4>
        </div> <!-- row -->
      </div> <!-- accordian section heading -->

      <div id="collapse-quest-{{q.id}}"
        class="panel-collapse collapse {% if q.id == active_q_id %} in {% endif %}"
        role="tabpanel" aria-labelledby="heading-quest-{{q.id}}">
        <ul class="list-group">
          <li id="preview-content-{{q.id}}" class="list-group-item list-group-item-buttons">
              <p>
                <i class="fa fa-spinner fa-pulse fa-2x fa-fw"></i>
                &nbsp;Loading content...
                <!-- preview_content_quests_avail.html via AJAX -->
              </p>
          </li>
        </ul>
      </div> <!-- accordian panel-collapse -->


    </div> <!-- accordian -->

  {% endfor %} <!-- for each quest -->

  </div> <!-- accordian panel group -->

{% else %}
  <p>No quests are available.</p>
{% endif %}
