{% extends "quest_manager/base.html" %}
{% load crispy_forms_tags %}

{% block head_css %}
.reply_comment {
  display: none;
}
{% endblock %}

{% block heading_inner %}{{ heading }}{% endblock %}

{% block content %}

  {% if not submission.is_completed %}
    <!-- <div class="pull-right"> -->
        <!-- <a class="btn btn-danger" href="{% url 'quests:drop' submission.id %}" role="button">Drop</a> -->
        <!-- <a class="btn btn-primary" href="{% url 'quests:complete' submission.id %}" role="button">Complete</a> -->
    <!-- </div> -->
  {% endif %}

  {% with submission.quest as quest %}
    {% include "quest_manager/quest_detail_content.html" %}
  {% endwith %}

  <div class="panel panel-primary">
    <div class="panel-heading">
      <h3 class="panel-title">Past Submissions and Replies</h3>
    </div>
    <ul class="list-group">
      {% with submission.get_comments as target_comments %}
        {% include "quest_manager/comments.html" %}
      {% endwith %}
    </ul>
  </div>

  <div class="panel panel-primary">
    <div class="panel-heading">
      <h3 class="panel-title">Quest Submission Form</h3>
    </div>
    <div class="panel-body panel-summernote">
      {% with target=submission  form=main_comment_form%}
        {% include "quest_manager/comment_form_main.html" %}
      {% endwith %}
    </div>
  </div>



{% endblock %}

{% block js %}
<script>
  $('.reply_btn').click(function(e){
    e.preventDefault();
    $(this).parent().nextAll('.reply_comment').slideToggle();
  })
</script>
{% endblock %}
