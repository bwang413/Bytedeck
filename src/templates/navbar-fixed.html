{% load staticfiles %}

<!-- Fixed navbar -->
<nav class="navbar navbar-default navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="{% url 'home' %}"><i class="fa fa-home"></i>
</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <!-- <li class="active"><a href="{% url 'home' %}">Home</a></li> -->
        <li><a href="{% url 'home' %}">Announcements <span class="badge">23</span></a></li>
        <li><a href="{% url 'home' %}">Quests</a></li>
        <li><a href="{% url 'home' %}">Achievements</a></li>

        {% if request.user.is_authenticated and request.user.is_staff %}
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Admin <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li class="dropdown-header">Content</li>
            <li><a href="{% url 'new_quest_custom' %}">Build Quests</a></li>
            <li><a href="#">Build Achievements</a></li>
            <li role="separator" class="divider"></li>
            <li class="dropdown-header">Users</li>
            <li><a href="#">Remove User</a></li>
            <li role="separator" class="divider"></li>
            <li class="dropdown-header">Database</li>
            <li><a href="/admin">Django Admin</a></li>
            <li role="separator" class="divider"></li>
            <li class="dropdown-header">Debug</li>
            <li><a href="{% url 'email_demo' %}">Email Test</a></li>
          </ul>
        </li>
        {% endif %}

      </ul>
      <ul class="nav navbar-nav navbar-right">

        {% if request.user.is_authenticated %}
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown"
            role="button" aria-haspopup="true" aria-expanded="false">

            <i class="fa fa-user{% if request.user.is_staff %}-secret{%endif%}"></i>
            &nbsp; {{ request.user }} <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li class="dropdown-header">Privileges</li>
            <li><a href="javascript:var%20KICKASSVERSION='2.0';var%20s%20=%20document.createElement('script');s.type='text/javascript';document.body.appendChild(s);s.src='//hi.kickassapp.com/kickass.js';void(0);">Destroy the Hackerspace</a></li>
            <li><a href="javascript:(function%20()%20{var%20s%20=%20document.createElement('script');s.setAttribute('src',%20'http://fontbomb.ilex.ca/js/main.js');document.body.appendChild(s);}());">Bomb the Hackerspace</a></li>
            <li><a href='javascript:if(!window.ThreeDit){ThreeDit=function(a,b){function%20G(a){p=a.clientX+g.scrollLeft;q=a.clientY+g.scrollTop}function%20F(){var%20a=g.scrollLeft-t;var%20b=g.scrollTop-u;p=v=g.scrollLeft+r;q=w=g.scrollTop+s;n+=a;o+=b;x=v+l.clientLeft-e.pageXOffset;y=w+l.clientTop-e.pageYOffset;t=g.scrollLeft;u=g.scrollTop}function%20E(){r=e.innerWidth/2;s=e.innerHeight/2;p=v=g.scrollLeft+r;q=w=g.scrollTop+s;x=v+l.clientLeft-e.pageXOffset;y=w+l.clientTop-e.pageYOffset}function%20D(){n+=(p-n)*.05;o+=(q-o)*.05;var%20a=(n-v)/r*5;var%20b=-(o-w)/s*5;for(var%20e=0;e<d.length;e++){var%20f=d[e].node;var%20g=f;var%20h=0;var%20k=0;var%20l=d[e].z;f.style[i]=x-h+"px%20"+(y-k)+"px";f.style[j]="rotateY("+a+"deg)%20rotateX("+b+"deg)translate3d(0px,0px,%20"+l*c.zDepth+"px)"}}function%20C(){var%20a;for(var%20b=0;b<d.length;b++){d[b].node.style[j]="none"}delete%20d;d=[];A(g,0);d.push({node:g,z:0});d.sort(function%20h(a,b){return%20a.z-b.z});var%20c=0;var%20e=[c];d[0].z=c;for(var%20b=1;b<d.length;b++){e.push(c=d[b].z==d[b-1].z?c:c+1)}var%20f=e[e.length-1];for(var%20b=0;b<d.length;b++){d[b].z=e[b]/f}}function%20B(a){c.perspective=a;k[h+"Perspective"]=c.perspective+"px"}function%20A(a,b,e){if(d.length>=c.maxElems-1)return;if(!e&&a.tagName=="DIV"&&a.childNodes.length>0){d.push({node:a,z:b})}for(var%20f=0;f<a.childNodes.length;f++){A(a.childNodes[f],b+1,a.childNodes.length<2)}}function%20z(a){f=a;g=f.body;h="webkitTransform"in%20g.style?"webkit":"MozTransform"in%20g.style?"Moz":null;i=h+"TransformOrigin";j=h+"Transform";l=f.documentElement;k=l.style;m=e.getComputedStyle;t=g.scrollLeft;u=g.scrollTop;k[h+"Perspective"]=c.perspective+"px";k.backgroundImage=m(g).getPropertyValue("background-image");k.backgroundColor=m(g).getPropertyValue("background-color");C();if(!c.initialized){E();n=p;o=q;e.addEventListener("resize",E);e.addEventListener("scroll",F);f.addEventListener("mousemove",G);setInterval(D,1e3/60)}c.initialized=true}var%20c={zDepth:300,maxElems:100,perspective:500,initialized:false};var%20d=[];var%20e=a;var%20f=b;var%20g;var%20h;var%20i;var%20j;var%20k;var%20l;var%20m;var%20n;var%20o;var%20p;var%20q;var%20r;var%20s;var%20t;var%20u;var%20v;var%20w;var%20x;var%20y;c.init=z;c.recollectElems=C;c.render=D;c.changePerspective=B;return%20c}(window,document);ThreeDit.init(document);}else{ThreeDit.recollectElems();}'>3D Hackerspace</a></li>
            <li><a href='javascript:var%20script=document.createElement("script");script.src="http://google-gravity-bookmarklet.googlecode.com/svn/trunk/bookmarklet/";document.body.appendChild(script);void(0);'>Turn on Gravity</a></li>
            <li role="separator" class="divider"></li>
            <li class="dropdown-header">Profile</li>
            <li><a href="{% url 'account_change_password' %}">Change Password</a></li>
          </ul>
        </li>

        <li><a href="{% url 'account_logout' %}">Sign Out</a></li>
        {% else %}

        <li><a href="{% url 'account_signup' %}">Sign Up</a></li>
        {% endif %}
      </ul>
      {% if not request.user.is_authenticated and not "/accounts/login" in request.get_full_path %}

          <form class="navbar-form navbar-right" method="POST" action="{% url 'account_login' %}"> {% csrf_token %}
            <div class="input-group input-group-unified input-group-sm">
              <input type="text" class="form-control" name="login" placeholder="Username" />
              <input type="password" class="form-control" name="password" placeholder="Password" />
              <span class="input-group-btn">
                <button type="submit" class="btn btn-default">Sign In</button>
              </span>
            </div>
          </form>

      {% endif %}
    </div><!--/.nav-collapse -->
  </div>
</nav>
