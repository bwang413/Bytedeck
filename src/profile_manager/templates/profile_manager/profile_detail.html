{% extends "profile_manager/base.html" %}

{% block heading_inner %}{{ object.user.username }}'s Profile
  <a class="btn btn-info" href="{% url 'profiles:profile_update' object.id %}" role="button">Edit</a>
{% endblock %}

{% block content %}

<div class="row">
  <div class="col-sm-2">
    <img class="img-responsive img-rounded center-block" src="{{object.avatar.url}}" alt="avatar"/>
  </div>
  <div class="col-sm-10">

    <div class="panel panel-primary">
      <div class="panel-heading">

        <h3 class="panel-title">
          <a href="{% url 'courses:ranks' %}">
             <div class="pull-right">
               <i class="{{object.get_rank.fa_icon}} fa-lg"></i>
               {{object.get_rank}}
             </div>
          </a>
          {{object.first_name}}
          {% if object.preferred_name %} ({{ object.preferred_name}}) {% endif %}
          {{object.last_name}}{% if object.alias %}, aka {{ object.alias}}{% endif %}
        </h3>

      </div>
      <div class="panel-body">

        <!-- <div class="row">
          <div class="col-sm-1">
            Group
          </div>
          <div class="col-sm-10">
            <div class="progress">
              <div class="progress-bar" role="progressbar" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100"
                  style="width: 60%;">
                <span class="sr-only">60% Complete</span>
              </div>
            </div>
          </div>
          <div class="col-sm-2">
            X | 1000
          </div>
        </div> -->
        <div class="pull-right"> {{object.get_xp}} | 1000</div>
        <div>{{courses.0.course}} {{courses.0.grade}} </div>
        <div class="progress progress-xp">&nbsp; {% widthratio object.get_xp 1000 100 %}&#37;
          <div class="progress-bar" role="progressbar" aria-valuenow="{{object.get_xp}}" aria-valuemin="0" aria-valuemax="1000"
              style="width: {% widthratio object.get_xp 1000 100 %}%;">
            <span class="sr-only">{% widthratio object.get_xp 1000 100 %}% Complete</span>
          </div>
        </div>

        <div class="pull-right"> x | 1000</div>
        <div>Next Rank </div>
        <div class="progress progress-xp">progress
          <div class="progress-bar" role="progressbar" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100"
              style="width: 60%;">progress-bar
            <span class="sr-only">60% Complete</span>
          </div>
        </div>

      </div>

    </div> <!--panel -->

  </div>
</div>

<div class="row">
  <div class="col-sm-6">
    <div class="panel panel-primary">
      <div class="panel-heading">
        <h3 class="panel-title">General</h3>
      </div>
      <div class="panel-body">
        <p>SN: {{ object.student_number}}</p>
        <p>Grad: {{ object.grad_year}}</p>
        <p>Account Created: {{ object.datetime_created}} ({{ object.datetime_created|timesince}} ago)</p>
      </div>
     </div> <!--panel -->
     <div class="panel panel-primary">
       <div class="panel-heading">
         <h3 class="panel-title">Courses</h3>
       </div>
       <ul class="list-group">
         {% if courses %}
             {% for course in courses %}
               <li class="list-group-item {% if not course.semester.active_by_date %}text-muted{% endif %}">
                 {{course.course}} {{course.grade}} <br/>
                 <small>{{course.block}} Block, Semester {{course.semester.number}}, {{course.semester}}</small>
               </li>
             {% endfor %}
         {% else %}
           <li class="list-group-item">You have not joined a course yet.
             <a href="{% url 'courses:create' %}" class="btn btn-info btn-xs" role="button">Join a Course</a>
           </li>
         {% endif %}
       </ul>
      </div> <!--panel -->

     <div class="panel panel-primary">
       <div class="panel-heading">
         <h3 class="panel-title">Quests</h3>
       </div>
       <div class="list-group">
         <div class="list-group-item list-group-item-info">In Progress</div>
         {% if in_progress_submissions %}
           {% for s in in_progress_submissions %}
             <a href="{{s.get_absolute_url}}" class="list-group-item list-group-item-packed
                 {% if s.is_returned %}list-group-item-danger
                 {% endif %}">
               <img class="icon-xs" src="{{ s.quest.icon_url|default_if_none:'#' }}" alt=""/>
               {{s.quest}} <small>({{s.quest.xp}} XP)</small>
             </a>
           {% endfor %}
         {% else %}
           <div class="list-group-item">None.</div>
         {% endif %}
         <div class="list-group-item list-group-item-info">Completed</div>
         {% if completed_submissions %}
           {% for s in completed_submissions %}
             <a href="{{s.get_absolute_url}}" class="list-group-item list-group-item-packed
                 {% if s.is_awaiting_approval %}list-group-item-warning
                 {% endif %}">
               <img class="icon-xs" src="{{ s.quest.icon_url|default_if_none:'#' }}" alt=""/>
               {{s.quest}} <small>({{s.quest.xp}} XP)</small>
             </a>
           {% endfor %}
         {% else %}
           <div class="list-group-item">None.</div>
         {% endif %}
        </div>

         <!-- <li class="list-group-item list-group-item-info">Completed</li>
         {% if completed_submissions %}
             {% for s in completed_submissions %}
               <li class="list-group-item list-group-item-packed">
                {{s.quest}} <small>({{s.quest.xp}} XP)</small>
               </li>
             {% endfor %}
         {% else %}
           <li class="list-group-item">None.</li>
         {% endif %}
       </ul> -->
      </div> <!--panel -->

      <div class="panel panel-primary">
        <div class="panel-heading">
          <h3 class="panel-title">Recent Activity</h3>
        </div>
        <div class="panel-body">
          <p>Badges</p>
        </div>
       </div> <!--panel -->
  </div>
  <div class="col-sm-6">
     <div class="panel panel-primary">
       <div class="panel-heading">
         <h3 class="panel-title">Badges</h3>
       </div>
       <div class="panel-body">
         <p>Badges</p>
       </div>
      </div> <!--panel -->
      <div class="panel panel-primary">
        <div class="panel-heading">
          <h3 class="panel-title">Achievements</h3>
        </div>
        <div class="panel-body">
          <p>Badges</p>
        </div>
       </div> <!--panel -->
       <div class="panel panel-primary">
         <div class="panel-heading">
           <h3 class="panel-title">Awards</h3>
         </div>
         <div class="panel-body">
           <p>Badges</p>
         </div>
        </div> <!--panel -->
  </div>
</div>

{% endblock %}
