{% extends "base_sidebar.html" %}
{% load crispy_forms_tags %}
{% load staticfiles %}

{% block head_css %}
<!-- BOOTSTRAP TABLES -->
<!-- http://bootstrap-table.wenzhixin.net.cn/getting-started/ -->
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.8.1/bootstrap-table.min.css">
{% endblock %}

{% block head_title%}{% if title %}{{ title }}{% endif %}{% endblock%}

{% block heading %}Group <i class="fa fa-users pull-right"></i>{% endblock %}

{% block content %}
<!-- <table class="table table-striped"> -->
<table data-toggle="table" data-sort-name='first' data-sort-order='desc'
  data-icons-prefix='fa' data-search='true'>
  <thead>
    <tr>
      <th data-sortable='true' data-field='username'>Username</th>
      {% if request.user.is_staff %}
      <th data-sortable='true' data-field='xp'>XP</th>
      <th data-field='mark'>Mark</th>
      <th data-sortable='true' data-field='first'>First Name</th>
      <th data-sortable='true' data-field='last'>Last Name</th>
      <th data-sortable='true' data-field='pref'>Preferred</th>
      <th data-sortable='true' data-field='alias'>Alias</th>
      <th data-field='gamelab'></th>
      <th data-field='pw'></th>
      {% endif %}
    </tr>
  </thead>
  <tbody>
    {% for object in object_list %}
    <tr {% if object.game_lab_transfer_process_on %}class="danger"{% endif %}>
      {% if request.user.is_staff %}
      <td>
        <a href="{% url 'profiles:profile_detail' object.id %}">
        {{object.user}}
        </a>
      </th>
      <td>{{object.xp}}</th>
      <td>{{object.mark|floatformat}}%</th>
      <td>{{object.first_name}}</td>
      <td>{{object.last_name}}</td>
      <td>{{object.preferred_name}}</td>
      <td>{{object.alias}}</td>
      <td><a href="{% url 'profiles:GameLab_toggle' object.id %}">
        <small {% if object.game_lab_transfer_process_on %}class="text-danger"{% endif %}>
          GameLab <b>{{object.game_lab_transfer_process_on|yesno:'ON,OFF'}}</b></small></a></td>
      <td><a href="/admin/auth/user/{{object.user.id}}/password/"><small>Reset password</small></a></td>
      {% else %}
      <td>{{object.user}}</td>
      {% endif %}
    </tr>
    {% endfor %}
  </tbody>
</table>

{% endblock %}

{% block js %}
<!-- BOOTSTRAP TABLES -->
<!-- http://bootstrap-table.wenzhixin.net.cn/getting-started/ -->
<!-- Latest compiled and minified JavaScript -->
<script src="//cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.8.1/bootstrap-table.min.js"></script>
{% endblock %}
